package daytwoparttwo

import "testing"

func TestIsLevelSafe(t *testing.T) {
	tests := []struct {
		left       int
		right      int
		changeType ReportChangeType
		expected   bool
	}{
		{0, 0, Unknown, false},
		{0, 0, Increasing, false},
		{0, 0, Decreasing, false},

		{0, 1, Unknown, true},
		{0, 2, Unknown, true},
		{0, 3, Unknown, true},
		{0, 4, Unknown, false},

		{10, 9, Unknown, true},
		{10, 8, Unknown, true},
		{10, 7, Unknown, true},
		{10, 6, Unknown, false},

		{0, 1, Increasing, true},
		{0, 2, Increasing, true},
		{0, 3, Increasing, true},
		{0, 4, Increasing, false},

		{10, 9, Increasing, false},
		{10, 8, Increasing, false},
		{10, 7, Increasing, false},
		{10, 6, Increasing, false},

		{0, 1, Decreasing, false},
		{0, 2, Decreasing, false},
		{0, 3, Decreasing, false},
		{0, 4, Decreasing, false},

		{10, 9, Decreasing, true},
		{10, 8, Decreasing, true},
		{10, 7, Decreasing, true},
		{10, 6, Decreasing, false},
	}

	for _, test := range tests {
		if output := isLevelSafe(test.left, test.right, test.changeType); output != test.expected {
			t.Errorf("Output %v not equal to expected %v. Test setup: %+v", output, test.expected, test)
		}
	}
}

func TestIsReportAcceptable(t *testing.T) {
	tests := []struct {
		report   []int
		expected bool
	}{
		{[]int{7, 6, 4, 2, 1}, true},
		{[]int{1, 2, 7, 8, 9}, false},
		{[]int{9, 7, 6, 2, 1}, false},
		{[]int{9, 7, 6, 7, 9}, false},
		{[]int{1, 3, 2, 4, 5}, true},
		{[]int{8, 6, 4, 4, 1}, true},
		{[]int{1, 3, 6, 7, 9}, true},
		{[]int{50, 49, 50, 51, 53}, true},
		{[]int{31, 33, 31, 34, 31}, false},
		{[]int{83, 86, 85, 88, 89, 91, 91}, false},
		{[]int{74, 75, 78, 81, 80, 83, 86, 90}, false},
		{[]int{72, 73, 72, 74, 75, 80}, false},
		{[]int{19, 21, 22, 25, 25, 28}, true},
		{[]int{4, 6, 6, 7, 10, 9}, false},
		{[]int{49, 51, 52, 55, 55, 58, 58}, false},
		{[]int{40, 41, 43, 44, 44, 48}, false},
		{[]int{53, 56, 56, 57, 62}, false},
		{[]int{26, 29, 33, 34, 36, 38}, false},
		{[]int{35, 38, 41, 45, 44}, true},
		{[]int{28, 31, 33, 35, 39, 39}, false},
		{[]int{75, 77, 81, 82, 86}, false},
		{[]int{85, 86, 88, 89, 93, 98}, false},
		{[]int{78, 80, 85, 88, 90}, false},
		{[]int{36, 39, 42, 43, 44, 47, 53, 50}, true},
		{[]int{74, 77, 80, 85, 86, 87, 90, 90}, false},
		{[]int{51, 53, 54, 57, 59, 64, 68}, false},
		{[]int{15, 17, 23, 25, 32}, false},
		{[]int{46, 45, 47, 49, 51}, true},
		{[]int{25, 23, 26, 27, 30, 27}, false},
		{[]int{51, 50, 51, 52, 53, 53}, false},
		{[]int{51, 50, 52, 55, 56, 59, 63}, false},
		{[]int{40, 38, 40, 42, 43, 48}, false},
		{[]int{23, 21, 22, 19, 22, 25}, false},
		{[]int{22, 20, 22, 25, 24, 27, 30, 28}, false},
		{[]int{95, 92, 94, 95, 93, 93}, false},
		{[]int{78, 75, 77, 76, 80}, false},
		{[]int{31, 30, 31, 33, 31, 32, 37}, false},
		{[]int{12, 10, 12, 15, 15, 18}, false},
		{[]int{67, 66, 68, 68, 67}, false},
		{[]int{67, 64, 64, 66, 66}, false},
		{[]int{71, 70, 72, 72, 74, 75, 78, 82}, false},
		{[]int{40, 38, 40, 42, 43, 48}, false},
		{[]int{23, 21, 22, 19, 22, 25}, false},
		{[]int{22, 20, 22, 25, 24, 27, 30, 28}, false},
		{[]int{95, 92, 94, 95, 93, 93}, false},
		{[]int{78, 75, 77, 76, 80}, false},
		{[]int{31, 30, 31, 33, 31, 32, 37}, false},
		{[]int{12, 10, 12, 15, 15, 18}, false},
		{[]int{67, 66, 68, 68, 67}, false},
		{[]int{67, 64, 64, 66, 66}, false},
		{[]int{71, 70, 72, 72, 74, 75, 78, 82}, false},
		{[]int{15, 14, 14, 16, 19, 20, 25}, false},
		{[]int{50, 47, 48, 50, 52, 56, 58, 59}, false},
		{[]int{5, 4, 5, 8, 12, 15, 14}, false},
		{[]int{37, 34, 36, 40, 42, 45, 45}, false},
		{[]int{5, 2, 4, 5, 9, 10, 11, 15}, false},
		{[]int{11, 8, 12, 13, 15, 20}, false},
		{[]int{25, 22, 25, 32, 34, 37, 38, 41}, false},
		{[]int{6, 4, 7, 10, 16, 13}, false},
		{[]int{95, 92, 97, 99, 99}, false},
		{[]int{17, 16, 23, 24, 28}, false},
		{[]int{78, 75, 80, 81, 86}, false},
		{[]int{11, 11, 14, 16, 17}, true},
		{[]int{40, 40, 43, 45, 48, 50, 47}, false},
		{[]int{37, 37, 40, 41, 42, 43, 46, 46}, false},
		{[]int{90, 90, 92, 94, 98}, false},
		{[]int{35, 35, 36, 38, 43}, false},
		{[]int{74, 74, 77, 76, 79, 82, 84, 87}, false},
		{[]int{23, 23, 25, 27, 26, 23}, false},
		{[]int{94, 94, 95, 98, 95, 96, 97, 97}, false},
		{[]int{70, 70, 68, 70, 74}, false},
		{[]int{2, 2, 1, 2, 8}, false},
		{[]int{46, 46, 48, 48, 51}, false},
		{[]int{69, 69, 72, 74, 77, 79, 79, 77}, false},
		{[]int{49, 49, 52, 54, 57, 57, 57}, false},
		{[]int{28, 28, 29, 29, 33}, false},
		{[]int{51, 51, 53, 56, 56, 59, 61, 67}, false},
		{[]int{27, 27, 29, 33, 36, 39, 42}, false},
		{[]int{29, 29, 30, 34, 37, 38, 41, 39}, false},
		{[]int{34, 34, 35, 36, 40, 42, 42}, false},
		{[]int{22, 22, 26, 28, 32}, false},
		{[]int{7, 7, 10, 14, 20}, false},
		{[]int{35, 35, 38, 39, 46, 48}, false},
		{[]int{23, 23, 24, 26, 29, 36, 35}, false},
		{[]int{27, 27, 29, 35, 35}, false},
		{[]int{61, 61, 66, 69, 70, 74}, false},
		{[]int{26, 26, 32, 34, 36, 43}, false},
		{[]int{41, 45, 46, 48, 49, 51}, true},
		{[]int{5, 9, 11, 13, 14, 16, 17, 15}, false},
		{[]int{72, 76, 79, 81, 83, 86, 87, 87}, false},
		{[]int{64, 68, 69, 72, 75, 76, 79, 83}, false},
		{[]int{27, 31, 33, 36, 37, 40, 46}, false},
		{[]int{85, 89, 92, 93, 94, 91, 92}, false},
		{[]int{65, 69, 66, 67, 68, 70, 72, 71}, false},
		{[]int{84, 88, 91, 94, 93, 93}, false},
		{[]int{78, 82, 79, 82, 83, 84, 86, 90}, false},
		{[]int{15, 19, 20, 19, 24}, false},
		{[]int{41, 45, 48, 50, 53, 53, 56, 59}, false},
		{[]int{27, 31, 32, 32, 31}, false},
		{[]int{84, 88, 88, 90, 90}, false},
		{[]int{8, 12, 12, 13, 17}, false},
		{[]int{84, 88, 89, 89, 95}, false},
		{[]int{58, 62, 64, 68, 69, 71}, false},
		{[]int{1, 5, 9, 12, 15, 14}, false},
		{[]int{57, 61, 62, 65, 68, 69, 73, 73}, false},
		{[]int{1, 5, 9, 10, 14}, false},
		{[]int{46, 50, 53, 57, 63}, false},
		{[]int{63, 67, 68, 69, 74, 75, 77}, false},
		{[]int{55, 59, 66, 68, 70, 68}, false},
		{[]int{6, 10, 11, 17, 17}, false},
		{[]int{76, 80, 82, 88, 89, 90, 94}, false},
		{[]int{73, 77, 82, 85, 90}, false},
		{[]int{12, 18, 19, 22, 24}, true},
		{[]int{47, 54, 55, 58, 60, 62, 59}, false},
		{[]int{4, 9, 11, 14, 14}, false},
		{[]int{64, 70, 71, 72, 73, 77}, false},
		{[]int{80, 86, 88, 90, 95}, false},
		{[]int{61, 68, 71, 68, 71, 74, 76}, false},
		{[]int{79, 85, 87, 84, 85, 88, 86}, false},
		{[]int{51, 56, 57, 55, 58, 58}, false},
		{[]int{37, 42, 41, 44, 45, 48, 50, 54}, false},
		{[]int{74, 79, 76, 78, 80, 82, 88}, false},
		{[]int{61, 66, 66, 67, 70}, false},
		{[]int{37, 43, 46, 49, 49, 48}, false},
		{[]int{77, 82, 85, 86, 88, 91, 91, 91}, false},
		{[]int{26, 33, 33, 35, 36, 37, 39, 43}, false},
		{[]int{42, 49, 49, 52, 58}, false},
		{[]int{39, 44, 47, 50, 52, 56, 58}, false},
		{[]int{36, 41, 43, 44, 47, 48, 52, 51}, false},
		{[]int{42, 49, 50, 54, 54}, false},
		{[]int{63, 70, 73, 75, 77, 81, 85}, false},
		{[]int{74, 80, 84, 87, 93}, false},
		{[]int{75, 80, 83, 86, 93, 94}, false},
		{[]int{4, 10, 13, 14, 19, 21, 20}, false},
		{[]int{65, 72, 75, 80, 83, 86, 89, 89}, false},
		{[]int{64, 70, 73, 74, 80, 81, 82, 86}, false},
		{[]int{20, 25, 30, 33, 38}, false},
		{[]int{57, 56, 54, 51, 48, 49}, true},
		{[]int{88, 87, 86, 83, 83}, true},
		{[]int{55, 52, 49, 48, 45, 42, 40, 36}, true},
		{[]int{59, 56, 54, 53, 50, 49, 44}, true},
		{[]int{28, 26, 25, 22, 21, 20, 21, 19}, true},
		{[]int{10, 9, 7, 5, 7, 10}, false},
		{[]int{44, 42, 40, 43, 43}, false},
		{[]int{50, 47, 50, 48, 47, 44, 43, 39}, false},
		{[]int{79, 76, 78, 77, 74, 69}, false},
		{[]int{32, 29, 29, 27, 25}, true},
		{[]int{30, 29, 26, 23, 20, 20, 22}, false},
		{[]int{61, 58, 58, 56, 55, 54, 51, 51}, false},
		{[]int{80, 77, 76, 76, 72}, false},
		{[]int{56, 54, 51, 51, 44}, false},
		{[]int{64, 61, 58, 56, 55, 51, 50, 47}, false},
		{[]int{28, 26, 25, 21, 20, 18, 16, 19}, false},
		{[]int{94, 93, 91, 89, 86, 82, 82}, false},
		{[]int{76, 74, 73, 70, 69, 65, 64, 60}, false},
		{[]int{76, 75, 71, 70, 63}, false},
		{[]int{66, 63, 62, 57, 56}, false},
		{[]int{55, 53, 50, 44, 47}, true},
		{[]int{53, 52, 49, 46, 44, 42, 37, 37}, false},
		{[]int{66, 64, 63, 57, 53}, false},
		{[]int{41, 39, 37, 36, 33, 28, 26, 21}, false},
		{[]int{21, 24, 21, 19, 17, 14}, true},
		{[]int{67, 70, 68, 65, 64, 62, 61, 62}, false},
		{[]int{52, 53, 52, 49, 49}, false},
		{[]int{85, 86, 85, 84, 83, 81, 77}, false},
		{[]int{30, 32, 29, 27, 25, 20}, false},
		{[]int{77, 80, 81, 80, 77, 76}, false},
		{[]int{96, 99, 98, 95, 92, 94, 96}, false},
		{[]int{87, 88, 91, 90, 90}, false},
		{[]int{63, 65, 64, 63, 66, 65, 61}, false},
		{[]int{76, 78, 77, 75, 76, 70}, false},
		{[]int{50, 51, 48, 48, 47, 46, 45, 44}, false},
		{[]int{73, 76, 75, 75, 78}, false},
		{[]int{56, 57, 56, 56, 55, 54, 52, 52}, false},
		{[]int{53, 56, 54, 54, 51, 49, 47, 43}, false},
		{[]int{64, 67, 67, 66, 60}, false},
		{[]int{56, 58, 55, 53, 52, 48, 45}, false},
		{[]int{44, 45, 44, 41, 37, 40}, false},
		{[]int{15, 17, 16, 12, 12}, false},
		{[]int{58, 60, 58, 57, 54, 50, 47, 43}, false},
		{[]int{52, 55, 51, 48, 41}, false},
		{[]int{83, 86, 81, 78, 77, 75}, true},
		{[]int{46, 47, 45, 44, 43, 37, 40}, false},
		{[]int{59, 60, 53, 51, 50, 48, 48}, false},
		{[]int{23, 26, 25, 24, 23, 17, 13}, false},
		{[]int{54, 55, 48, 46, 45, 43, 41, 34}, false},
		{[]int{14, 14, 11, 10, 7, 5}, true},
		{[]int{80, 80, 78, 75, 74, 72, 69, 71}, false},
		{[]int{63, 63, 62, 60, 58, 58}, false},
		{[]int{65, 65, 64, 63, 59}, false},
		{[]int{98, 98, 95, 94, 92, 89, 87, 81}, false},
		{[]int{97, 97, 98, 97, 96}, false},
		{[]int{95, 95, 97, 96, 97}, false},
		{[]int{45, 45, 44, 42, 40, 38, 41, 41}, false},
		{[]int{6, 6, 7, 5, 1}, false},
		{[]int{22, 22, 23, 22, 17}, false},
	}

	for _, test := range tests {
		if output := isReportAcceptable(test.report); output != test.expected {
			t.Errorf("Output %v not equal to %v. Test setup: %+v", output, test.expected, test)
		}
	}
}
